-- Переспавн алспаун и скриптовых объектов для правки конфигов, логики и ошибок без необходимости начинать НИ
-- При добавлении строк в таблицу добавлять в info_known_objects.xml поршни all_spawn_fix_[номер секции]

--[[ таблица заполняется так:
local objects = {
	[1] (это номер поршня all_spawn_fix) = {
		name = name из секции алспавна или секция скриптового спавна, и далее варианты на выбор:
			allspawn_section = номер секции или -1 для удаления, 
			create_section = номер секции для доспавна новых объектов,
			spawn_story_id = spawn_story_id объекта из алспауна, спавнится всегда
			script = функция для выполнения разового скрипта при необходимости
	},
}
--]]

-- Эту таблицу нужно полностью чистить перед каждой правкой алспауна или перед каждым патчем, с которого нужно начинать НИ
local objects = {
	[1] = {
		{name = "aes2_space_restrictor_death_0000", allspawn_section = 11289},
	},
	[2] = {
		{name = "restr_ozersky_check_6",		allspawn_section = 2779},
	},
	[3] = {
		{name = "sak_lager",					allspawn_section = 5275},
		{name = "val_sos",						allspawn_section = 15643,	create_section = 15643},
		{name = "esc_prisoner",					allspawn_section = 15657,	create_section = 15657},
		{name = "zone_flame_small_upiter_01",	allspawn_section = 15644,	create_section = 15644},
		{name = "lights_camp_fire_upiter_01",	allspawn_section = 15645,	create_section = 15645},
		{name = "camp_fire_upiter_01",			allspawn_section = 15646,	create_section = 15646},
		{name = "killer_lager_upiter",			allspawn_section = 15647,	create_section = 15647},
		{name = "killer_lager_upiter_respawn",	allspawn_section = 15648,	create_section = 15648},
		{name = "kill_stalker_lager_upiter_01",	allspawn_section = 15649,	create_section = 15649},
		{name = "kill_stalker_lager_upiter_02",	allspawn_section = 15650,	create_section = 15650},
		{name = "kill_stalker_lager_upiter_03",	allspawn_section = 15651,	create_section = 15651},
		{name = "zone_flame_small_upiter_02",	allspawn_section = 15652,	create_section = 15652},
		{name = "lights_camp_fire_upiter_02",	allspawn_section = 15653,	create_section = 15653},
		{name = "camp_fire_upiter_02",			allspawn_section = 15654,	create_section = 15654},
		{name = "upiter_bunker_koster_02",		allspawn_section = 15655,	create_section = 15655},
		{name = "bar_ivanbarprapor",			allspawn_section = 15656,	create_section = 15656},
		{name = "bar_dolg_ivancov",				allspawn_section = 6754},
		{name = "bar_dolg_regular_5",			allspawn_section = 6761},
--		{name = "esc_provodnik",				allspawn_section = 3238,	create_section = 3238},
		{name = "bar_stalker_0001",				allspawn_section = 6799,	create_section = 6799},
		{name = "esc_fox",						allspawn_section = 3106},
--		{name = "gar_seryi",					allspawn_section = 4033},
		{name = "gar_hellcar",					allspawn_section = 4073},
		{name = "agr_krot",						allspawn_section = 4709},
		{name = "val_sos_wounded",				allspawn_section = 5514},
--		{name = "marsh_barman",					allspawn_section = 13815},
		{name = "dcity2_dok2_bolot2_vid",		allspawn_section = 1374},
		{name = "esc_shustryi",					allspawn_section = 3394,	create_section = 3394},
	},
	[4] = {
--		{name = "marsh_remont",					allspawn_section = 13814},
--		{name = "marsh_barman",					allspawn_section = 13815},
	},
	[5] = {
--		{name = "esc_provodnik",				allspawn_section = 3238,	create_section = 3238},
	},
	[6] = {
		{name = "pri_zone_witches_galantine_koleso_0001",	allspawn_section = 15658,	create_section = 15658},
		{name = "pri_zone_witches_galantine_koleso_0002",	allspawn_section = 15659,	create_section = 15659},
		{name = "pri_zone_witches_galantine_koleso_0003",	allspawn_section = 15660,	create_section = 15660},
		{name = "pri_zone_witches_galantine_koleso_0004",	allspawn_section = 15661,	create_section = 15661},
		{name = "pri_zone_witches_galantine_koleso_0005",	allspawn_section = 15662,	create_section = 15662},
		{name = "pri_zone_witches_galantine_koleso_0006",	allspawn_section = 15663,	create_section = 15663},
		{name = "pri_zone_witches_galantine_koleso_0007",	allspawn_section = 15664,	create_section = 15664},
		{name = "pri_zone_witches_galantine_koleso_0008",	allspawn_section = 15665,	create_section = 15665},
		{name = "pri_zone_witches_galantine_koleso_0009",	allspawn_section = 15666,	create_section = 15666},
		{name = "pri_zone_witches_galantine_koleso_0010",	allspawn_section = 15667,	create_section = 15667},
		{name = "pri_zone_witches_galantine_koleso_0011",	allspawn_section = 15668,	create_section = 15668},
		{name = "pri_zone_witches_galantine_koleso_0012",	allspawn_section = 15669,	create_section = 15669},
		{name = "pri_zone_witches_galantine_koleso_0013",	allspawn_section = 15670,	create_section = 15670},
		{name = "pri_zone_witches_galantine_koleso_0014",	allspawn_section = 15671,	create_section = 15671},
		{name = "pri_zone_witches_galantine_koleso_0015",	allspawn_section = 15672,	create_section = 15672},
		{name = "pri_zone_witches_galantine_koleso_0016",	allspawn_section = 15673,	create_section = 15673},
		{name = "pri_zone_witches_galantine_koleso_0017",	allspawn_section = 15674,	create_section = 15674},
		{name = "pri_zone_witches_galantine_koleso_0018",	allspawn_section = 15675,	create_section = 15675},
		{name = "pri_zone_witches_galantine_koleso_0019",	allspawn_section = 15676,	create_section = 15676},
		{name = "pri_zone_witches_galantine_koleso_0020",	allspawn_section = 15677,	create_section = 15677},
	},
	[7] = {
		{name = "zat_b22_medic_physic_door",	allspawn_section = 15250},
		{name = "arhara_zaton",					allspawn_section = 15678,	create_section = 15678,	script = "all_spawn_fix.check_yakut_agro()"},
	},
	[8] = {
		{name = "gar_seryi",					allspawn_section = 4033},
	},
	[9] = {
		{name = "esc_provodnik",				allspawn_section = 3238,	create_section = 3238},
	},
	[10] = {
		{name = "mil_physic_object0034",		allspawn_section = 7854,	script = "all_spawn_fix.sound_script_npc()"},
		{name = "mil_freedom_member0002",		allspawn_section = 7746},
		{name = "mil_freedom_member0012",		allspawn_section = 7749},
		{name = "mil_freedom_member0018",		allspawn_section = 7745},
		{name = "mil_freedom_member0021",		allspawn_section = 7751},
		{name = "mil_freedom_stalker0026",		allspawn_section = 7750},
		{name = "marsh_remont",					allspawn_section = 13814},
		{name = "marsh_barman",					allspawn_section = 13815},
		{name = "esc_akim",						allspawn_section = 3768},
		{name = "val_bandit_trader",			allspawn_section = 5960},
		{name = "val_lager_bandits_borov",		allspawn_section = 5592},
		{name = "yantar_ecolog_general",		allspawn_section = 8699},
		{name = "Sak",							allspawn_section = 9237},
		{name = "gar_dolg_blokpost_4",			allspawn_section = 3991},
		{name = "amk_vitek_voron",				allspawn_section = 4365},
		{name = "agro_adrenalin",				allspawn_section = 4512},
		{name = "sak_military_stalker",			allspawn_section = 4961},
		{name = "otshelnik",					allspawn_section = 831},
		{name = "forest_lesnik",				allspawn_section = 14476},
		{name = "dolgovazyi",					allspawn_section = 7007},
		{name = "bar_dolg_petrenko",			allspawn_section = 6753},
		{name = "bar_dolg_leader",				allspawn_section = 6755},
		{name = "stalker_green_zahar",			allspawn_section = 6572},
		{name = "vp_zaz_white",					allspawn_section = 15679,	create_section = 15679},
		{name = "vp_zaz_gorbat",				allspawn_section = 15680,	create_section = 15680},
		{name = "lbr_uaz",						allspawn_section = 15681,	create_section = 15681},
		{name = "jup_uazik_gai",				allspawn_section = 15682,	create_section = 15682},
		{name = "aes2_tr13",					allspawn_section = 15683,	create_section = 15683},
		{name = "zat_niva",						allspawn_section = 15684,	create_section = 15684},
		{name = "jup_niva",						allspawn_section = 15685,	create_section = 15685},
		{name = "aes_btr_act",					allspawn_section = 15686,	create_section = 15686},
		{name = "aes2_gaz66",					allspawn_section = 15687,	create_section = 15687},
		{name = "jup_kamaz_mil",				allspawn_section = 15688,	create_section = 15688},
		{name = "vp_laz",						allspawn_section = 15689,	create_section = 15689},
		{name = "aver_schoolbus",				allspawn_section = 15690,	create_section = 15690},
		{name = "pes_zaz968",					allspawn_section = 15691,	create_section = 15691},
		{name = "mar_zil130",					allspawn_section = 15692,	create_section = 15692},
		{name = "zat_zil131",					allspawn_section = 15693,	create_section = 15693},
	},
	[11] = {
		{name = "hos_treasure_3", spawn_story_id = 14150,	script = "all_spawn_fix.respawn_helmet()"},
		{name = "hos_treasure_2", spawn_story_id = 14151},
		{name = "hos_treasure_1", spawn_story_id = 14152},
		
		{name = "jund_prefix_inventory_box_0000", spawn_story_id = 14200},
		{name = "jund_prefix_inventory_box_0001", spawn_story_id = 14201},
		{name = "jund_prefix_inventory_box_0002", spawn_story_id = 14202},
		
		{name = "labx8_inventory_box_0000", spawn_story_id = 14220},
		{name = "labx8_inventory_box_0001", spawn_story_id = 14221},
		
		{name = "lim_treasure_14", spawn_story_id = 14060},
		{name = "lim_treasure_1", spawn_story_id = 14061},
		{name = "lim_treasure_5", spawn_story_id = 14062},
		
		{name = "mar_treasure_22", spawn_story_id = 31020},
		{name = "mar_treasure_21", spawn_story_id = 31021},
		{name = "mar_treasure_24", spawn_story_id = 31022},
		{name = "mar_treasure_23", spawn_story_id = 31023},
		{name = "mar_treasure_25", spawn_story_id = 31024},
		{name = "mar_treasure_26", spawn_story_id = 31025},
		{name = "mar_treasure_27", spawn_story_id = 31026},
		{name = "mar_treasure_28", spawn_story_id = 31027},
		{name = "mar_treasure_29", spawn_story_id = 31028},
		{name = "mar_treasure_30", spawn_story_id = 31029},
		{name = "mar_treasure_31", spawn_story_id = 31030},
		{name = "mar_treasure_32", spawn_story_id = 31031},
		{name = "mar_treasure_33", spawn_story_id = 31032},
		{name = "mar_treasure_34", spawn_story_id = 31033},
		{name = "mar_treasure_35", spawn_story_id = 31034},
		{name = "mar_treasure_36", spawn_story_id = 31035},
		{name = "mar_treasure_37", spawn_story_id = 31036},
		{name = "mar_treasure_38", spawn_story_id = 31037},
		{name = "mar_treasure_39", spawn_story_id = 31038},
		{name = "mar_treasure_40", spawn_story_id = 31039},
		{name = "mar_treasure_41", spawn_story_id = 31040},
		{name = "mar_treasure_42", spawn_story_id = 31041},
		{name = "mar_treasure_43", spawn_story_id = 31042},
		{name = "mar_treasure_44", spawn_story_id = 31043},
		{name = "mar_q_t_l_16", spawn_story_id = 31044},
		{name = "mar_q_t_l_1", spawn_story_id = 31045},
		{name = "mar_q_t_l_2", spawn_story_id = 31046},
		{name = "mar_q_t_a_3", spawn_story_id = 31047},
		{name = "mar_q_t_a_15", spawn_story_id = 31048},
		{name = "mar_q_t_l_4", spawn_story_id = 31049},
		{name = "mar_q_t_l_5", spawn_story_id = 31050},
		{name = "mar_q_n_6", spawn_story_id = 31051},
		{name = "mar_q_n_7", spawn_story_id = 31052},
		{name = "mar_q_n_8", spawn_story_id = 31053},
		{name = "mar_q_n_9", spawn_story_id = 31054},
		{name = "mar_q_n_10", spawn_story_id = 31055},
		{name = "mar_q_n_11", spawn_story_id = 31056},
		{name = "mar_q_n_12", spawn_story_id = 31057},
		{name = "mar_q_n_13", spawn_story_id = 31058},
		{name = "mar_q_n_14", spawn_story_id = 31059},
		{name = "bum_treasure_00", spawn_story_id = 31100},
		{name = "bum_treasure_01", spawn_story_id = 31101},
		{name = "bum_treasure_02", spawn_story_id = 31102},
		
		{name = "zl_treasure_00", spawn_story_id = 31120},
		{name = "zl_treasure_01", spawn_story_id = 31121},
		{name = "zl_treasure_02", spawn_story_id = 31122},
		
		{name = "lab_treasure_00", spawn_story_id = 31140},
		{name = "lab_treasure_01", spawn_story_id = 31141},
		{name = "lab_treasure_02", spawn_story_id = 31142},
		{name = "lab_treasure_03", spawn_story_id = 31143},
		{name = "lab_treasure_04", spawn_story_id = 31144},
		{name = "av_bunker_stiralka_avto_small", spawn_story_id = 31145},
		
		{name = "pesh_treasure_00", spawn_story_id = 31160},
		{name = "pesh_treasure_01", spawn_story_id = 31161},
		{name = "pesh_treasure_02", spawn_story_id = 31162},
		
		{name = "sar_treasure_00", spawn_story_id = 31180},
		{name = "sar_treasure_01", spawn_story_id = 31181},
		{name = "sar_treasure_02", spawn_story_id = 31182},
		
		{name = "x10_treasure_00", spawn_story_id = 31200},
		{name = "x10_treasure_01", spawn_story_id = 31201},
		{name = "x10_treasure_02", spawn_story_id = 31202},
		
		{name = "vp_treasure_01", spawn_story_id = 31301},
		{name = "vp_treasure_02", spawn_story_id = 31302},
		{name = "vp_treasure_03", spawn_story_id = 31303},
		{name = "vp_treasure_04", spawn_story_id = 31304},
		{name = "vp_treasure_05", spawn_story_id = 31305},
		{name = "vp_treasure_06", spawn_story_id = 31306},
		{name = "vp_treasure_07", spawn_story_id = 31307},
		{name = "vp_treasure_08", spawn_story_id = 31308},
		{name = "vp_treasure_09", spawn_story_id = 31309},
		{name = "vp_treasure_10", spawn_story_id = 31310},
		{name = "vp_treasure_11", spawn_story_id = 31311},
		{name = "vp_treasure_12", spawn_story_id = 31312},
		{name = "vp_treasure_13", spawn_story_id = 31313},
		{name = "vp_treasure_14", spawn_story_id = 31314},
		{name = "vp_treasure_15", spawn_story_id = 31315},
		{name = "vp_treasure_16", spawn_story_id = 31316},
		{name = "vp_treasure_17", spawn_story_id = 31317},
		{name = "vp_treasure_18", spawn_story_id = 31318},
		{name = "vp_treasure_19", spawn_story_id = 31319},
		{name = "vp_treasure_20", spawn_story_id = 31320},
		{name = "vp_treasure_21", spawn_story_id = 31321},
		{name = "vp_treasure_22", spawn_story_id = 31322},
		{name = "vp_treasure_23", spawn_story_id = 31323},
		{name = "vp_treasure_24", spawn_story_id = 31324},
		{name = "vp_treasure_25", spawn_story_id = 31325},
		{name = "vp_treasure_26", spawn_story_id = 31326},
		{name = "vp_treasure_27", spawn_story_id = 31327},
		{name = "vp_treasure_28", spawn_story_id = 31328},
		{name = "vp_treasure_29", spawn_story_id = 31329},
		{name = "vp_treasure_30", spawn_story_id = 31330},
		{name = "vp_treasure_31", spawn_story_id = 31331},
		{name = "vp_treasure_32", spawn_story_id = 31332},
		{name = "vp_treasure_33", spawn_story_id = 31333},
		
		{name = "zat_treasure_01", spawn_story_id = 31401},
		{name = "zat_treasure_02", spawn_story_id = 31402},
		{name = "zat_treasure_03", spawn_story_id = 31403},
		{name = "zat_treasure_04", spawn_story_id = 31404},
		{name = "zat_treasure_05", spawn_story_id = 31405},
		{name = "zat_treasure_06", spawn_story_id = 31406},
		{name = "zat_treasure_07", spawn_story_id = 31407},
		{name = "zat_treasure_08", spawn_story_id = 31408},
		{name = "zat_treasure_09", spawn_story_id = 31409},
		{name = "zat_treasure_10", spawn_story_id = 31453},
		{name = "zat_treasure_11", spawn_story_id = 31411},
		{name = "zat_treasure_12", spawn_story_id = 31412},
		{name = "zat_treasure_13", spawn_story_id = 31413},
		{name = "zat_treasure_14", spawn_story_id = 31414},
		{name = "zat_treasure_15", spawn_story_id = 31415},
		{name = "zat_treasure_16", spawn_story_id = 31416},
		{name = "zat_treasure_17", spawn_story_id = 31417},
		{name = "zat_treasure_18", spawn_story_id = 31418},
		{name = "zat_treasure_19", spawn_story_id = 31419},
		{name = "zat_treasure_20", spawn_story_id = 31420},
		{name = "zat_treasure_21", spawn_story_id = 31421},
		{name = "zat_treasure_22", spawn_story_id = 31422},
		{name = "zat_treasure_24", spawn_story_id = 31424},
		{name = "zat_treasure_25", spawn_story_id = 31425},
		{name = "zat_treasure_26", spawn_story_id = 31426},
		{name = "zat_treasure_28", spawn_story_id = 31428},
		{name = "zat_treasure_29", spawn_story_id = 31429},
		{name = "zat_treasure_30", spawn_story_id = 31430},
		{name = "zat_treasure_31", spawn_story_id = 31431},
		{name = "zat_treasure_32", spawn_story_id = 31432},
		{name = "zat_treasure_33", spawn_story_id = 31433},
		{name = "zat_treasure_34", spawn_story_id = 31434},
		{name = "zat_treasure_36", spawn_story_id = 31436},
		{name = "zat_treasure_37", spawn_story_id = 31437},
		{name = "zat_treasure_38", spawn_story_id = 31438},
		{name = "zat_treasure_39", spawn_story_id = 31439},
		{name = "zat_treasure_40", spawn_story_id = 31440},
		{name = "zat_treasure_41", spawn_story_id = 31441},
		{name = "zat_treasure_42", spawn_story_id = 31442},
		{name = "zat_treasure_43", spawn_story_id = 31443},
		{name = "zat_treasure_44", spawn_story_id = 31444},
		{name = "zat_treasure_45", spawn_story_id = 31445},
		{name = "zat_treasure_46", spawn_story_id = 31446},
		{name = "zat_treasure_47", spawn_story_id = 31447},
		{name = "zat_treasure_48", spawn_story_id = 31448},
		{name = "zat_treasure_49", spawn_story_id = 31449},
		{name = "zat_treasure_50", spawn_story_id = 31450},
		{name = "zat_treasure_51", spawn_story_id = 31451},
		{name = "zat_treasure_52", spawn_story_id = 31452},

		{name = "jup_b202_snag_treasure", spawn_story_id = 14170},
		{name = "jup_b10_secret_03", spawn_story_id = 14171},
		{name = "jup_b10_secret_02", spawn_story_id = 14172},
		{name = "jup_b10_secret_01", spawn_story_id = 14173},
		{name = "jup_treasure_01", spawn_story_id = 31501},
		{name = "jup_treasure_02", spawn_story_id = 31502},
		{name = "jup_treasure_03", spawn_story_id = 31503},
		{name = "jup_treasure_05", spawn_story_id = 31505},
		{name = "jup_treasure_07", spawn_story_id = 31507},
		{name = "jup_treasure_08", spawn_story_id = 31508},
		{name = "jup_treasure_09", spawn_story_id = 31509},
		{name = "jup_treasure_10", spawn_story_id = 31550},
		{name = "jup_treasure_11", spawn_story_id = 31511},
		{name = "jup_treasure_12", spawn_story_id = 31512},
		{name = "jup_treasure_13", spawn_story_id = 31513},
		{name = "jup_treasure_14", spawn_story_id = 31514},
		{name = "jup_treasure_15", spawn_story_id = 31515},
		{name = "jup_treasure_16", spawn_story_id = 31516},
		{name = "jup_treasure_18", spawn_story_id = 31518},
		{name = "jup_treasure_20", spawn_story_id = 31520},
		{name = "jup_treasure_21", spawn_story_id = 31521},
		{name = "jup_treasure_22", spawn_story_id = 31522},
		{name = "jup_treasure_23", spawn_story_id = 31523},
		{name = "jup_treasure_24", spawn_story_id = 31524},
		{name = "jup_treasure_25", spawn_story_id = 31525},
		{name = "jup_treasure_26", spawn_story_id = 31526},
		{name = "jup_treasure_27", spawn_story_id = 31527},
		{name = "jup_treasure_29", spawn_story_id = 31529},
		{name = "jup_treasure_30", spawn_story_id = 31530},
		{name = "jup_treasure_31", spawn_story_id = 31531},
		{name = "jup_treasure_32", spawn_story_id = 31532},
		{name = "jup_treasure_33", spawn_story_id = 31533},
		{name = "jup_treasure_34", spawn_story_id = 31534},
		{name = "jup_treasure_35", spawn_story_id = 31535},
		{name = "jup_treasure_36", spawn_story_id = 31536},
		{name = "jup_treasure_37", spawn_story_id = 31537},
		{name = "jup_treasure_38", spawn_story_id = 31538},
		{name = "jup_treasure_39", spawn_story_id = 31539},
		{name = "jup_treasure_40", spawn_story_id = 31540},
		{name = "jup_treasure_41", spawn_story_id = 31541},
		{name = "jup_treasure_42", spawn_story_id = 31542},
		{name = "jup_treasure_43", spawn_story_id = 31543},
		{name = "jup_treasure_44", spawn_story_id = 31544},
		{name = "jup_treasure_45", spawn_story_id = 31545},
		{name = "jup_treasure_46", spawn_story_id = 31546},
		{name = "jup_treasure_47", spawn_story_id = 31547},
		{name = "jup_treasure_48", spawn_story_id = 31548},
		{name = "jup_treasure_49", spawn_story_id = 31549},
		
		{name = "red_treasure_14", spawn_story_id = 31600},
		{name = "red_treasure_16", spawn_story_id = 31601},
		{name = "red_treasure_21", spawn_story_id = 31602},
		{name = "red_treasure_22", spawn_story_id = 31603},
		{name = "red_treasure_13", spawn_story_id = 31604},
		{name = "red_treasure_24", spawn_story_id = 31605},
		{name = "red_treasure_9", spawn_story_id = 31606},
		{name = "red_treasure_7", spawn_story_id = 31607},
		{name = "red_q11_n", spawn_story_id = 31608},
		{name = "red_treasure_2", spawn_story_id = 31609},
		{name = "red_q1_t_l", spawn_story_id = 31621},
		{name = "red_q2_t_a", spawn_story_id = 31611},
		{name = "red_q3_n", spawn_story_id = 31612},
		{name = "red_q4_n", spawn_story_id = 31613},
		{name = "red_q5_n", spawn_story_id = 31614},
		{name = "red_q7_t_a", spawn_story_id = 31615},
		{name = "red_q8_n", spawn_story_id = 31616},
		{name = "red_q9_n", spawn_story_id = 31617},
		{name = "red_q10_n", spawn_story_id = 31618},
		{name = "red_inventory_box", spawn_story_id = 31619},
		{name = "red_inventory_box_0000", spawn_story_id = 31620},
	},
	[12] = {
		{name = "aver_arhara_gulag2_sniper_1",	allspawn_section = 887},
		{name = "aver_arhara_gulag2_sniper_2",	allspawn_section = 888},
		{name = "aver_arhara_gulag2_sniper_3",	allspawn_section = 889},
		{name = "aver_arhara_gulag2_sniper_4",	allspawn_section = 890},
		{name = "aver_arhara_gulag2_sniper_5",	allspawn_section = 891},
		{name = "aver_arhara_gulag2_sniper_6",	allspawn_section = 892},
	},
}


-- переспавн объектов из алспауна по таблице
function respawn_allspawn()
  log2( "[%s]: begin", script_name() )
  for i, group in pairs( objects ) do
    if not has_alife_info( "all_spawn_fix_" .. i ) then 
      db.actor:give_info_portion( "all_spawn_fix_" .. i )
      for j, obj in pairs( group ) do
        respawn_allspawn_object( obj )
      end
    end
  end
  log2( "[%s]: end", script_name() )
end


-- переспавн единичного объекта из алспаун
function respawn_allspawn_object(obj)
	if release_allspawn_object(obj.name) then
		-- объект удалился
		if obj.allspawn_section and obj.allspawn_section ~= -1 then
			-- доспавниваем
			alife():create(obj.allspawn_section)
		end
	else
		-- объекта не было - создаём, если нужно
		if obj.create_section then
			alife():create(obj.create_section)
		end
	end
	
	-- Сторилайновый объект спавним всегда
	if obj.spawn_story_id then
		alife():create(alife():spawn_id(obj.spawn_story_id))
	end
	
	-- Выполняем скрипт
	if obj.script then
		loadstring(obj.script)()
	end
end

-- удаление алспаун объекта по его name
function release_allspawn_object(name)
	local obj = alife():object(name)
	if obj then
		alife():release(obj)
		return true
	end
	return false
end

-- Скриптовые правки
function check_yakut_agro()
	if has_alife_info("yakut_treasure_done") then
		buusty_dialog.yakut_agro_delete()
	end
end

function sound_script_npc()
	local obj 
	
	obj = snp.object_by_section_offline("bibliofrend_talk_zaton")
	if obj then
		alife():release(obj)
		obj = alife():create("bibliofrend_talk_zaton",vector():set(124.68988037109,-7.3328924179077,177.81799316406),1180494,3686)
		snp.set_stalker_story_id(obj,19926)
	end

	obj = snp.object_by_section_offline("bibliofrend_talk_black_zaton")
	if obj then
		alife():release(obj)
		obj = alife():create("bibliofrend_talk_black_zaton",vector():set(124.68988037109,-7.3328924179077,177.81799316406),1180494,3686)
		snp.set_stalker_story_id(obj,19927)
	end
	
	obj = snp.object_by_section_offline("aaz_upi_torg")
	if obj then
		alife():release(obj)
		obj = alife():create("aaz_upi_torg",vector():set(-12.37338924408,23.103647232056,245.67727661133),695048,3725)
		snp.set_stalker_story_id(obj,19812)
	end
	
	obj = snp.object_by_section_offline("pri_dimak")
	if obj then
		alife():release(obj)
		obj = alife():create("pri_dimak",vector():set(135.55590820313,4.9057364463806,-202.5612487793),363721,3765)
		snp.set_stalker_story_id(obj,19813)
	end
	
	obj = snp.object_by_section_offline("akill_npc")
	if obj then
		alife():release(obj)
		obj = alife():create("akill_npc",vector():set(133.46839904785,4.9044389724731,-188.2385559082),361172,3765)
		snp.set_stalker_story_id(obj,21005)
	end
	
	obj = snp.object_by_section_offline("dragunof_npc")
	if obj then
		alife():release(obj)
		obj = alife():create("dragunof_npc",vector():set(191.67535400391,2.8055994510651,212.01971435547),260495,2219)
		snp.set_stalker_story_id(obj,21003)
	end
end

function respawn_helmet()
	if has_alife_info("sar2_monolith_miracle") then 
		db.actor:iterate_inventory(function (dummy, item)
			if item:section() == "good_psy_helmet" then
				amk.remove_item_from_inventory(item, db.actor)
				alife():create("good_psy_helmet1",db.actor:position(),db.actor:level_vertex_id(),db.actor:game_vertex_id(),db.actor:id())
			end 
		end, nil)
	end
end


